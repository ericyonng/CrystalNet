配置

* server:16核32G, 9个线程（1个主线程，2个网络线程，3个日志线程，1个业务线程，1个监控线程，1个垃圾回收线程）
* client:32核64G, 15个线程（1个主线程，8个网络线程，3个日志线程，1个业务线程，1个监控线程，1个垃圾回收线程）
* 发包间隔：每个session间隔50ms1个包

具体测试

* 2000

  * 40000qps，延迟：min:16ms, average:11ms, max:16ms
    * 服务器：网络线程无积压，业务线程无积压，收发38915qps，收发平衡，内存0.6%, cpu没有跑满（67%）

* 4000

  * 79409qps，延迟：min:35ms, average:38ms, max:84ms

  * * 服务器：网络线程略微有消息积压1170，业务线程无积压，收发78208qps，收发平衡，内存0.6%, cpu没有跑满（最大97%）

* 5000

  * 消息积压严重原因是cpu跑满

结论

* 服务器最大承载量4000人，qps:80000qps, 延迟：min:35ms, average:38ms, max:84ms